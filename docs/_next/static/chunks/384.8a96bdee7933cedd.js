!function(){var t,e,r,n,o,i,c={93004:function(){},83217:function(t,e,r){"use strict";var n=r(51901),o=r.n(n),i=null;function c(t,e){return e.roi({x:t.x,y:t.y,width:t.width,height:t.height})}function a(t,e,r,n){let i=Math.round(n*t.width),c=Math.round(n*t.height),a=Math.max(0,t.y-c),l=Math.min(e.rows-1,t.y+t.height+c),s=Math.max(0,t.x-i),u=Math.min(e.cols-1,t.x+t.width+i),h=e.roi({x:s,y:a,width:u-s,height:l-a}),f=new(o()).Mat(h.rows-r.rows+1,h.cols-r.cols+1,o().CV_32FC1);o().matchTemplate(h,r,f,o().TM_CCOEFF_NORMED);let d=o().minMaxLoc(f);return h.delete(),f.delete(),{...t,x:d.maxLoc.x+s,y:d.maxLoc.y+a}}o().onRuntimeInitialized=()=>{onmessage=t=>{let{imageData:e,firstFrame:r,frameSpacingBox:n,gridDimensions:l}=t.data;try{let t=o().matFromImageData(e),s=n.height-2*r.height,u=n.width-2*r.width;0==r.sheet&&null!==i&&(i.deallocate,i=null),i=function(t,e,r,n,i){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.25,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(s<=0)throw Error("nLagFrames=".concat(s," must be greater than 0"));let h={...e};null===u?u=c(e,t):h=a(h,t,u,1.5*l);let f=[h];for(;!(h.row===i.nRows-1&&h.col===i.nCols-1);){postMessage({type:"newFrame",frame:h});let e=function(t,e,r,n,o,i){let c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.25;if(e.row===o.nRows-1&&e.col===o.nCols-1)throw Error("Reached the last frame.");let l={...e};if(e.col===o.nCols-1?(l.row+=1,l.y+=e.height+n,l.col=0,l.x-=e.width*(o.nCols-1)+r*(o.nCols-1)):(l.col+=1,l.x+=e.width+r),!(0<=l.y&&l.y<t.rows)||!(0<=l.y+l.height&&l.y+l.height<t.rows))throw Error("Frame row coordinate ".concat(l.y," exceeds image height ").concat(t.rows));if(!(0<=l.x&&l.x<t.cols)||!(0<=l.x+l.width&&l.x+l.width<t.cols))throw Error("Frame col coordinate ".concat(l.x," exceeds image width ").concat(t.cols));return a(l,t,i,c)}(t,h,r,n,i,u);f.push(e),f.length>s&&(f=f.slice(1));let l=new(o()).Mat(u.rows,u.cols,u.type(),[0,0,0,0]);for(let e of f.slice(0,1)){let r=c(e,t);o().addWeighted(l,1,r,1/f.length,0,l),r.delete()}u.delete(),u=l,h=e}return postMessage({type:"newFrame",frame:h}),postMessage({type:"sheetEnd"}),u}(t,r,u,s,l,.25,16,i)}catch(t){console.trace(),postMessage({type:"error",error:t.stack})}}}}},a={};function l(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={exports:{}},n=!0;try{c[t].call(r.exports,r,r.exports,l),n=!1}finally{n&&delete a[t]}return r.exports}l.m=c,l.x=function(){var t=l.O(void 0,[218,236,434,719],function(){return l(83217)});return l.O(t)},t=[],l.O=function(e,r,n,o){if(r){o=o||0;for(var i=t.length;i>0&&t[i-1][2]>o;i--)t[i]=t[i-1];t[i]=[r,n,o];return}for(var c=1/0,i=0;i<t.length;i++){for(var r=t[i][0],n=t[i][1],o=t[i][2],a=!0,s=0;s<r.length;s++)c>=o&&Object.keys(l.O).every(function(t){return l.O[t](r[s])})?r.splice(s--,1):(a=!1,o<c&&(c=o));if(a){t.splice(i--,1);var u=n();void 0!==u&&(e=u)}}return e},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,{a:e}),e},l.d=function(t,e){for(var r in e)l.o(e,r)&&!l.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},l.f={},l.e=function(t){return Promise.all(Object.keys(l.f).reduce(function(e,r){return l.f[r](t,e),e},[]))},l.u=function(t){return 434===t?"static/chunks/434-275cb75a9d694276.js":"static/chunks/"+(({218:"aaea2bcf",236:"fc51dc41"})[t]||t)+"."+({218:"4c0895cc494648be",236:"8386d4dfac677fb6",719:"19347f5dac55ad69"})[t]+".js"},l.miniCssF=function(t){},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.tt=function(){return void 0===e&&(e={createScriptURL:function(t){return t}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(e=trustedTypes.createPolicy("nextjs#bundler",e))),e},l.tu=function(t){return l.tt().createScriptURL(t)},l.p="/framomatic/_next/",r={384:1},l.f.i=function(t,e){r[t]||importScripts(l.tu(l.p+l.u(t)))},o=(n=self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push.bind(n),n.push=function(t){var e=t[0],n=t[1],i=t[2];for(var c in n)l.o(n,c)&&(l.m[c]=n[c]);for(i&&i(l);e.length;)r[e.pop()]=1;o(t)},i=l.x,l.x=function(){return Promise.all([218,236,434,719].map(l.e,l)).then(i)},_N_E=l.x()}();